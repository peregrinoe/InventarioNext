<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Inventario - Almacenamiento Local</title>
    <link rel="stylesheet" href="./main.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üíª Sistema de Inventario</h1>
            <p>Gesti√≥n de Equipos de C√≥mputo - Almacenamiento Local</p>
        </header>
        
        <div class="backup-controls">
            <div class="info">
                <strong>üíæ Almacenamiento:</strong> Los datos se guardan autom√°ticamente en tu navegador
            </div>
            <button class="btn btn-success" onclick="exportarDatos()">üì• Exportar Datos (JSON)</button>
            <button class="btn btn-info" onclick="document.getElementById('fileInput').click()">üì§ Importar Datos</button>
            <input type="file" id="fileInput" accept=".json" onchange="importarDatos(event)">
        </div>
        
        <nav class="main-nav">
            <button class="nav-btn active" onclick="showSection('dashboard')">
                üìä Dashboard
            </button>
            <button class="nav-btn" onclick="showSection('colaboradores')">
                üë• Colaboradores
            </button>
            <button class="nav-btn" onclick="showSection('equipos')">
                üíª Equipos
            </button>
            <button class="nav-btn" onclick="showSection('asignaciones')">
                üîó Asignaciones
            </button>
            <button class="nav-btn" onclick="showSection('licencias')">
                üîë Licencias
            </button>
        </nav>
        
        <div class="content-area">
            <!-- DASHBOARD -->
            <section id="dashboard" class="section active">
                <div class="section-header">
                    <h2>Dashboard</h2>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>Total Colaboradores</h3>
                        <div class="stat-value" id="totalColaboradores">0</div>
                    </div>
                    <div class="stat-card equipos">
                        <h3>Total Equipos</h3>
                        <div class="stat-value" id="totalEquipos">0</div>
                    </div>
                    <div class="stat-card asignados">
                        <h3>Equipos Asignados</h3>
                        <div class="stat-value" id="equiposAsignados">0</div>
                    </div>
                    <div class="stat-card disponibles">
                        <h3>Equipos Disponibles</h3>
                        <div class="stat-value" id="equiposDisponibles">0</div>
                    </div>
                </div>
                
                <h3 style="margin-bottom: 15px; color: #1e293b;">Asignaciones Recientes</h3>
                <div class="table-container">
                    <table id="dashboardTable">
                        <thead>
                            <tr>
                                <th>Colaborador</th>
                                <th>Equipo</th>
                                <th>Tipo</th>
                                <th>Fecha Asignaci√≥n</th>
                                <th>Estado</th>
                            </tr>
                        </thead>
                        <tbody id="dashboardTableBody">
                            <tr>
                                <td colspan="5" class="empty-state">
                                    <div class="empty-state-icon">üìã</div>
                                    <h3>No hay asignaciones a√∫n</h3>
                                    <p>Comienza creando colaboradores y equipos</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
            
            <!-- COLABORADORES -->
            <section id="colaboradores" class="section">
                <div class="section-header">
                    <h2>Colaboradores</h2>
                    <button class="btn btn-primary" onclick="openModal('modalColaborador')">
                        ‚ûï Nuevo Colaborador
                    </button>
                </div>
                
                <div class="search-box">
                    <input type="text" id="searchColaborador" placeholder="üîç Buscar colaborador..." onkeyup="filterColaboradores()">
                </div>
                
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Foto</th>
                                <th>Nombre</th>
                                <th>Email</th>
                                <th>Departamento</th>
                                <th>Puesto</th>
                                <th>Equipos</th>
                                <th>Licencias</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="colaboradoresTableBody">
                            <tr>
                                <td colspan="8" class="empty-state">
                                    <div class="empty-state-icon">üë•</div>
                                    <h3>No hay colaboradores registrados</h3>
                                    <p>Haz clic en "Nuevo Colaborador" para comenzar</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
            
            <!-- EQUIPOS -->
            <section id="equipos" class="section">
                <div class="section-header">
                    <h2>Equipos de C√≥mputo</h2>
                    <button class="btn btn-primary" onclick="openModal('modalEquipo')">
                        ‚ûï Nuevo Equipo
                    </button>
                </div>
                
                <div class="search-box">
                    <input type="text" id="searchEquipo" placeholder="üîç Buscar equipo..." onkeyup="filterEquipos()">
                </div>
                
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Foto</th>
                                <th>Marca</th>
                                <th>Modelo</th>
                                <th>Tipo</th>
                                <th>N¬∞ Serie</th>
                                <th>Nombre equipo</th>
                                <th>Estado</th>
                                <th>Asignado a</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="equiposTableBody">
                            <tr>
                                <td colspan="9" class="empty-state">
                                    <div class="empty-state-icon">üíª</div>
                                    <h3>No hay equipos registrados</h3>
                                    <p>Haz clic en "Nuevo Equipo" para comenzar</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
            
            <!-- ASIGNACIONES -->
            <section id="asignaciones" class="section">
                <div class="section-header">
                    <h2>Asignaciones de Equipos</h2>
                    <button class="btn btn-primary" onclick="openModal('modalAsignacion')">
                        ‚ûï Nueva Asignaci√≥n
                    </button>
                </div>
                
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Colaborador</th>
                                <th>Equipo</th>
                                <th>Fecha Asignaci√≥n</th>
                                <th>Fecha Devoluci√≥n</th>
                                <th>Estado</th>
                                <th>Observaciones</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="asignacionesTableBody">
                            <tr>
                                <td colspan="7" class="empty-state">
                                    <div class="empty-state-icon">üîó</div>
                                    <h3>No hay asignaciones registradas</h3>
                                    <p>Haz clic en "Nueva Asignaci√≥n" para comenzar</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- LICENCIAS -->
            <section id="licencias" class="section">
                <div class="section-header">
                    <h2>Licencias de Software</h2>
                    <button class="btn btn-primary" onclick="openModal('modalLicencia')">
                        ‚ûï Nueva Licencia
                    </button>
                </div>
                
                <div class="search-box">
                    <input type="text" id="searchLicencia" placeholder="üîç Buscar licencia..." onkeyup="filterLicencias()">
                </div>
                
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Software</th>
                                <th>Tipo Licencia</th>
                                <th>Clave/Serial</th>
                                <th>Cantidad Asignada</th>
                                <th>Fecha Vencimiento</th>
                                <th>Estado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="licenciasTableBody">
                            <tr>
                                <td colspan="7" class="empty-state">
                                    <div class="empty-state-icon">üîë</div>
                                    <h3>No hay licencias registradas</h3>
                                    <p>Haz clic en "Nueva Licencia" para comenzar</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
        </div>
    </div>
    
    <!-- MODAL COLABORADOR -->
    <div id="modalColaborador" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalColaboradorTitle">Nuevo Colaborador</h3>
                <button class="close-modal" onclick="closeModal('modalColaborador')">&times;</button>
            </div>
            <form id="formColaborador" onsubmit="saveColaborador(event)">
                <input type="hidden" id="colaboradorId">
                
                <div class="form-group">
                    <label>Foto del Colaborador</label>
                    <input type="file" id="colaboradorFotoInput" accept="image/*" onchange="previewImage(event, 'colaboradorFotoPreview')">
                    <div style="display: flex; gap: 10px; margin-top: 10px;">
                        <button type="button" class="btn btn-secondary btn-sm" onclick="document.getElementById('colaboradorFotoInput').click()">üì∑ Seleccionar Foto</button>
                        <button type="button" class="btn btn-danger btn-sm" onclick="borrarFoto('colaborador')">üóëÔ∏è Borrar Foto</button>
                    </div>
                    <div id="colaboradorFotoPreview" style="margin-top: 10px;"></div>
                    <input type="hidden" id="colaboradorFoto">
                </div>

                <div class="form-grid">
                    <div class="form-group">
                        <label>Nombre Completo *</label>
                        <input type="text" id="colaboradorNombre" required>
                    </div>
                    <div class="form-group">
                        <label>Email *</label>
                        <input type="email" id="colaboradorEmail" required>
                    </div>
                    <div class="form-group">
                        <label>Tel√©fono</label>
                        <input type="tel" id="colaboradorTelefono">
                    </div>
                    <div class="form-group">
                        <label>Departamento *</label>
                        <select id="colaboradorDepartamento" required>
                            <option value="">Seleccionar...</option>
                            <option value="SAC">SAC</option>
                            <option value="Hospitality">Consultoria (Hospitality)</option>
                            <option value="Ventas">Ventas</option>
                            <option value="Facturacion y Cobranza">Facturaci√≥n y Cobranza</option>
                            <option value="Desarrollo">Desarrollo</option>
                            <option value="Operaciones">Operaciones</option>
                            <option value="Administraci√≥n">Administraci√≥n</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Puesto *</label>
                        <input type="text" id="colaboradorPuesto" required>
                    </div>
                    <div class="form-group">
                        <label>Fecha de Ingreso</label>
                        <input type="date" id="colaboradorFechaIngreso">
                    </div>
                    <div class="form-group">
                        <label>Jefe Inmediato</label>
                        <select id="colaboradorJefeInmediato" required>
                            <option value="">Seleccionar...</option>
                            <option value="No Aplica">No Aplica</option>
                            <option value="Mayra Nallely Tovar Garcia">Mayra Nallely Tovar Garcia</option>
                            <option value="Paulina Nieto Tovar">Paulina Nieto Tovar</option>
                            <option value="Gerardo Cortazar Mendez">Gerardo Cortazar Mendez</option>
                            <option value="Xochitl Raquel Rodriguez Cortes">Xochitl Raquel Rodriguez Cortes</option>
                            <option value="Kevin Martin Lechuga Lopez">Kevin Martin Lechuga Lopez</option>
                            <option value="Pablo Angel Valerio Alvarez">Pablo Angel Valerio Alvarez</option>
                            <option value="Reynaldo Granados Qui√±onez">Reynaldo Granados Qui√±onez</option>
                            <option value="Ismael D√≠az Najera">Ismael D√≠az Najera</option>
                        </select>
                    </div>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-success">üíæ Guardar</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('modalColaborador')">Cancelar</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- MODAL EQUIPO -->
    <div id="modalEquipo" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalEquipoTitle">Nuevo Equipo</h3>
                <button class="close-modal" onclick="closeModal('modalEquipo')">&times;</button>
            </div>
            <form id="formEquipo" onsubmit="saveEquipo(event)">
                <input type="hidden" id="equipoId">
                
                <div class="form-group" style="grid-column: 1 / -1;">
                    <label>Fotos del Estado Actual del Equipo (Frente, Teclado, Pantalla, etc.)</label>
                    <input type="file" id="equipoFotosInput" accept="image/*" multiple onchange="previewMultipleImages(event)">
                    <div style="display: flex; gap: 10px; margin-top: 10px;">
                        <button type="button" class="btn btn-secondary btn-sm" onclick="document.getElementById('equipoFotosInput').click()">üì∑ Seleccionar Fotos</button>
                        <button type="button" class="btn btn-danger btn-sm" onclick="borrarTodasFotos()">üóëÔ∏è Borrar Todas las Fotos</button>
                    </div>
                    <p style="margin-top: 8px; font-size: 0.85em; color: #64748b;">üí° Puedes seleccionar m√∫ltiples fotos: frente del equipo, teclado, pantalla, laterales, etc.</p>
                    <div id="equipoFotosPreview" style="margin-top: 15px; display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 15px;"></div>
                    <input type="hidden" id="equipoFotos">
                </div>

                <div class="form-grid">
                    <div class="form-group">
                        <label>Tipo de Equipo *</label>
                        <select id="equipoTipo" required>
                            <option value="">Seleccionar...</option>
                            <option value="Laptop">Laptop</option>
                            <option value="Desktop">Desktop</option>
                            <option value="Monitor">Monitor</option>
                            <option value="Tablet">Tablet</option>
                            <option value="Impresora">Impresora</option>
                            <option value="Esc√°ner">Esc√°ner</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Marca *</label>
                        <input type="text" id="equipoMarca" required>
                    </div>
                    <div class="form-group">
                        <label>Modelo *</label>
                        <input type="text" id="equipoModelo" required>
                    </div>
                    <div class="form-group">
                        <label>N√∫mero de Serie *</label>
                        <input type="text" id="equipoNumSerie" required>
                    </div>
                    <div class="form-group">
                        <label>Nombre del Equipo</label>
                        <input type="text" id="equipoNombre" placeholder="Ej: Laptop-Juan-01">
                    </div>
                     <div class="form-group">
                        <label>ID Interno equipo</label>
                        <input type="text" id="IdequipoInterno" placeholder="Ej: NT001XX">
                    </div>
                    <div class="form-group">
                        <label>Procesador</label>
                        <input type="text" id="equipoProcesador" placeholder="Ej: Intel i7">
                    </div>
                    <div class="form-group">
                        <label>RAM (GB)</label>
                        <input type="number" id="equipoRam" placeholder="8">
                    </div>
                    <div class="form-group">
                        <label>Almacenamiento</label>
                        <input type="text" id="equipoAlmacenamiento" placeholder="Ej: 512GB SSD">
                    </div>
                    <div class="form-group">
                        <label>Sistema Operativo</label>
                        <input type="text" id="equipoSO" placeholder="Ej: Windows 11">
                    </div>
                    <div class="form-group">
                        <label>Fecha de Compra</label>
                        <input type="date" id="equipoFechaCompra">
                    </div>
                    <div class="form-group">
                        <label>Estado *</label>
                        <select id="equipoEstado" required>
                            <option value="Disponible">Disponible</option>
                            <option value="Asignado">Asignado</option>
                            <option value="Mantenimiento">Mantenimiento</option>
                            <option value="Baja">Baja</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Observaciones</label>
                    <textarea id="equipoObservaciones"></textarea>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-success">üíæ Guardar</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('modalEquipo')">Cancelar</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- MODAL ASIGNACI√ìN -->
    <div id="modalAsignacion" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Nueva Asignaci√≥n</h3>
                <button class="close-modal" onclick="closeModal('modalAsignacion')">&times;</button>
            </div>
            <form id="formAsignacion" onsubmit="saveAsignacion(event)">
                <div class="form-grid">
                    <div class="form-group">
                        <label>Colaborador *</label>
                        <select id="asignacionColaborador" required>
                            <option value="">Seleccionar colaborador...</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Equipo *</label>
                        <select id="asignacionEquipo" required>
                            <option value="">Seleccionar equipo...</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Fecha de Asignaci√≥n *</label>
                        <input type="date" id="asignacionFecha" required>
                    </div>
                    <div class="form-group">
                        <label>Estado *</label>
                        <select id="asignacionEstado" required>
                            <option value="Activa">Activa</option>
                            <option value="Devuelto">Devuelto</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Observaciones</label>
                    <textarea id="asignacionObservaciones" placeholder="Condiciones, accesorios incluidos, etc."></textarea>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-success">üíæ Asignar Equipo</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('modalAsignacion')">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- MODAL LICENCIA -->
    <div id="modalLicencia" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalLicenciaTitle">Nueva Licencia</h3>
                <button class="close-modal" onclick="closeModal('modalLicencia')">&times;</button>
            </div>
            <form id="formLicencia" onsubmit="saveLicencia(event)">
                <input type="hidden" id="licenciaId">
                <div class="form-grid">
                    <div class="form-group">
                        <label>Software *</label>
                        <input type="text" id="licenciaSoftware" required placeholder="Ej: Microsoft Office 365">
                    </div>
                    <div class="form-group">
                        <label>Tipo de Licencia *</label>
                        <select id="licenciaTipo" required>
                            <option value="">Seleccionar...</option>
                            <option value="Perpetua">Perpetua</option>
                            <option value="Suscripci√≥n Anual">Suscripci√≥n Anual</option>
                            <option value="Suscripci√≥n Mensual">Suscripci√≥n Mensual</option>
                            <option value="Prueba">Prueba</option>
                            <option value="Gratuita">Gratuita</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Clave/Serial</label>
                        <input type="text" id="licenciaClave" placeholder="XXXXX-XXXXX-XXXXX">
                    </div>
                    <div class="form-group">
                        <label>Fecha de Compra</label>
                        <input type="date" id="licenciaFechaCompra">
                    </div>
                    <div class="form-group">
                        <label>Fecha de Vencimiento</label>
                        <input type="date" id="licenciaFechaVencimiento">
                    </div>
                    <div class="form-group">
                        <label>Estado *</label>
                        <select id="licenciaEstado" required>
                            <option value="Activa">Activa</option>
                            <option value="Vencida">Vencida</option>
                            <option value="Disponible">Disponible</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Notas</label>
                    <textarea id="licenciaNotas" placeholder="Informaci√≥n adicional..."></textarea>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-success">üíæ Guardar</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('modalLicencia')">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- MODAL ASIGNAR USUARIOS A LICENCIA -->
    <div id="modalAsignarUsuarios" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Asignar Usuarios a <span id="licenciaAsignarNombre"></span></h3>
                <button class="close-modal" onclick="closeModal('modalAsignarUsuarios')">&times;</button>
            </div>
            <div>
                <input type="hidden" id="licenciaAsignarId">
                
                <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                    <button type="button" class="btn btn-sm btn-success" onclick="seleccionarTodosUsuarios()">‚úì Seleccionar Todos</button>
                    <button type="button" class="btn btn-sm btn-secondary" onclick="deseleccionarTodosUsuarios()">‚úó Deseleccionar Todos</button>
                </div>
                
                <div class="search-box">
                    <input type="text" id="searchUsuarioAsignar" placeholder="üîç Buscar colaborador..." onkeyup="filterUsuariosAsignar()">
                </div>
                <div id="listaUsuariosAsignar" style="max-height: 400px; overflow-y: auto;">
                    <!-- Se llenar√° din√°micamente -->
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-success" onclick="guardarAsignacionesLicencia()">üíæ Guardar Asignaciones</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('modalAsignarUsuarios')">Cancelar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL DETALLE LICENCIA -->
    <div id="modalDetalleLicencia" class="modal">
        <div class="modal-content modal-detail">
            <div class="modal-header">
                <h3>Detalle de Licencia</h3>
                <button class="close-modal" onclick="closeModal('modalDetalleLicencia')">&times;</button>
            </div>
            <div id="detalleLicenciaContent">
                <!-- Se llenar√° din√°micamente -->
            </div>
        </div>
    </div>

    <!-- MODAL DETALLE COLABORADOR -->
    <div id="modalDetalleColaborador" class="modal">
        <div class="modal-content modal-detail">
            <div class="modal-header">
                <h3>Detalle del Colaborador</h3>
                <button class="close-modal" onclick="closeModal('modalDetalleColaborador')">&times;</button>
            </div>
            <div id="detalleColaboradorContent">
                <!-- Se llenar√° din√°micamente -->
            </div>
        </div>
    </div>

    <!-- MODAL DETALLE EQUIPO -->
    <div id="modalDetalleEquipo" class="modal">
        <div class="modal-content modal-detail">
            <div class="modal-header">
                <h3>Detalle del Equipo</h3>
                <button class="close-modal" onclick="closeModal('modalDetalleEquipo')">&times;</button>
            </div>
            <div id="detalleEquipoContent">
                <!-- Se llenar√° din√°micamente -->
            </div>
        </div>
    </div>
    
    <!-- NOTIFICACIONES -->
    <div id="notification" class="notification">
        <span id="notificationText"></span>
    </div>
<script src="./script.js"></script>
</body>
</html>
