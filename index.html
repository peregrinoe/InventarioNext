<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Inventario</title>
    <link rel="stylesheet" href="./main.css">
</head>
<body>

    <!-- ‚ïê‚ïê PANTALLA DE LOGIN ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="loginScreen" style="display:none;">
        <div id="loginCard">
            <div class="login-logo">
                <span class="login-icon">üíª</span>
                <h1>Sistema de Inventario</h1>
                <p>Gesti√≥n de Equipos de C√≥mputo</p>
            </div>

            <div id="loginError"></div>

            <form onsubmit="doLogin(event)">
                <div class="login-field">
                    <label>üë§ Usuario</label>
                    <input type="text" id="loginUsername" placeholder="Ingresa tu usuario" autocomplete="username" required>
                </div>
                <div class="login-field">
                    <label>üîí Contrase√±a</label>
                    <input type="password" id="loginPassword" placeholder="Ingresa tu contrase√±a" autocomplete="current-password" required>
                </div>
                <button type="submit" class="login-btn">üöÄ Ingresar</button>
            </form>

            <hr class="login-divider">
            <div class="login-roles">
                <div class="login-role-card">
                    <span class="role-emoji">üõ°Ô∏è</span>
                    <strong>Super Admin</strong>
                    <span>Acceso total</span>
                </div>
                <div class="login-role-card">
                    <span class="role-emoji">üëÅÔ∏è</span>
                    <strong>Operador</strong>
                    <span>Solo visualizaci√≥n</span>
                </div>
            </div>
        </div>
    </div>

    <!-- ‚ïê‚ïê BARRA DE USUARIO ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="userInfoBar" class="main-nav" style="display:none;"></div>

    <!-- ‚ïê‚ïê CONTENEDOR PRINCIPAL DE LA APP ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="appContainer" style="display:none;">
    <div class="container">
        <header>
            <h1>üíª Sistema de Inventario</h1>
            <p>Gesti√≥n de Equipos de C√≥mputo - Almacenamiento Local</p>
        </header>
        
        <!--<div class="backup-controls">
            <div class="info">
                <strong>üíæ Almacenamiento:</strong> Los datos se guardan autom√°ticamente en tu navegador
            </div>
            <button class="btn btn-success" onclick="exportarDatos()">üì• Exportar Datos (JSON)</button>
            <button class="btn btn-info" onclick="document.getElementById('fileInput').click()">üì§ Importar Datos</button>
            <input type="file" id="fileInput" accept=".json" onchange="importarDatos(event)">
        </div>-->
        
        <nav class="main-nav">
            <button class="nav-btn active" onclick="showSection('dashboard')">
                üìä Dashboard
            </button>
            <button class="nav-btn" onclick="showSection('colaboradores')">
                üë• Colaboradores
            </button>
            <button class="nav-btn" onclick="showSection('equipos')">
                üíª Equipos
            </button>
            <button class="nav-btn" onclick="showSection('celulares')">
                üì± Celulares
            </button>
            <button class="nav-btn" onclick="showSection('asignaciones')">
                üîó Asignaciones
            </button>
            <button class="nav-btn" onclick="showSection('licencias')">
                üîë Licencias
            </button>
            <button class="nav-btn" onclick="showSection('reportes')">
                üìà Reportes
            </button>
        </nav>
        
        <div class="content-area">
            <!-- DASHBOARD -->
            <section id="dashboard" class="section active">
                <div class="section-header">
                    <h2>Dashboard</h2>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>Total Colaboradores</h3>
                        <div class="stat-value" id="totalColaboradores">0</div>
                    </div>
                    <div class="stat-card equipos">
                        <h3>Total Equipos</h3>
                        <div class="stat-value" id="totalEquipos">0</div>
                    </div>
                    <div class="stat-card asignados">
                        <h3>Equipos Asignados</h3>
                        <div class="stat-value" id="equiposAsignados">0</div>
                    </div>
                    <div class="stat-card disponibles">
                        <h3>Equipos Disponibles</h3>
                        <div class="stat-value" id="equiposDisponibles">0</div>
                    </div>
                </div>
                
                <div class="stats-grid" style="margin-top: 20px;">
                    <div class="stat-card" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);">
                        <h3>Total Celulares</h3>
                        <div class="stat-value" id="totalCelulares">0</div>
                    </div>
                    <div class="stat-card" style="background: linear-gradient(135deg, #30cfd0 0%, #330867 100%);">
                        <h3>Celulares Asignados</h3>
                        <div class="stat-value" id="celularesAsignados">0</div>
                    </div>
                    <div class="stat-card" style="background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);">
                        <h3>Celulares Disponibles</h3>
                        <div class="stat-value" id="celularesDisponibles">0</div>
                    </div>
                    <div class="stat-card" style="background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);">
                        <h3>Total Licencias</h3>
                        <div class="stat-value" id="totalLicencias">0</div>
                    </div>
                </div>
                
                <h3 style="margin-bottom: 15px; color: #1e293b;">Asignaciones Recientes</h3>
                <div class="table-container">
                    <table id="dashboardTable">
                        <thead>
                            <tr>
                                <th>Colaborador</th>
                                <th>Equipo</th>
                                <th>Tipo</th>
                                <th>Fecha Asignaci√≥n</th>
                                <th>Estado</th>
                            </tr>
                        </thead>
                        <tbody id="dashboardTableBody">
                            <tr>
                                <td colspan="5" class="empty-state">
                                    <div class="empty-state-icon">üìã</div>
                                    <h3>No hay asignaciones a√∫n</h3>
                                    <p>Comienza creando colaboradores y equipos</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
            
            <!-- COLABORADORES -->
            <section id="colaboradores" class="section">
                <div class="section-header">
                    <h2>Colaboradores</h2>
                    <button class="btn btn-primary" onclick="openModal('modalColaborador')">
                        ‚ûï Nuevo Colaborador
                    </button>
                </div>
                
                <div class="search-box">
                    <input type="text" id="searchColaborador" placeholder="üîç Buscar colaborador..." onkeyup="filterColaboradores()">
                </div>
                <div class="filters-container">
                    <div class="filter-row">
                        <div class="filter-group">
                            <label>Filtrar por tipo:</label>
                            <select id="filterTipoColaborador" onchange="filterColaboradores()">
                                <option value="todos">Todos</option>
                                <option value="interno">Internos</option>
                                <option value="externo">Externos</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Foto</th>
                                <th data-sort="nombre" onclick="ordenarColaboradores('nombre')" style="cursor: pointer;">Nombre</th>
                                <th data-sort="email" onclick="ordenarColaboradores('email')" style="cursor: pointer;">Email</th>
                                <th data-sort="departamento" onclick="ordenarColaboradores('departamento')" style="cursor: pointer;">Departamento</th>
                                <th data-sort="puesto" onclick="ordenarColaboradores('puesto')" style="cursor: pointer;">Puesto</th>
                                <th>Contrato</th>
                                <th>Equipos</th>
                                <th>Licencias</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="colaboradoresTableBody">
                            <tr>
                                <td colspan="10" class="empty-state">
                                    <div class="empty-state-icon">üë•</div>
                                    <h3>No hay colaboradores registrados</h3>
                                    <p>Haz clic en "Nuevo Colaborador" para comenzar</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
            
            <!-- EQUIPOS -->
            <section id="equipos" class="section">
                <div class="section-header">
                    <h2>Equipos de C√≥mputo</h2>
                    <button class="btn btn-primary" onclick="openModal('modalEquipo')">
                        ‚ûï Nuevo Equipo
                    </button>
                </div>
                
                <div style="display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap;">
                    <div class="search-box" style="flex: 1; min-width: 250px; margin-bottom: 0;">
                        <input type="text" id="searchEquipo" placeholder="üîç Buscar equipo..." onkeyup="filterEquipos()">
                    </div>
                    <div style="min-width: 180px;">
                        <select id="filterEstado" onchange="filterEquipos()" style="width: 100%; padding: 12px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 14px;">
                            <option value="">üîç Todos los Estados</option>
                            <option value="Disponible">Disponible</option>
                            <option value="Asignado">Asignado</option>
                            <option value="En Reparaci√≥n">En Reparaci√≥n</option>
                            <option value="Dado de Baja">Dado de Baja</option>
                        </select>
                    </div>
                    <div style="min-width: 180px;">
                        <select id="filterCategoria" onchange="filterEquipos()" style="width: 100%; padding: 12px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 14px;">
                            <option value="">‚≠ê Todas las Categor√≠as</option>
                            <option value="1">‚≠ê Categor√≠a 1 - B√°sico</option>
                            <option value="2">‚≠ê‚≠ê Categor√≠a 2 - Intermedio</option>
                            <option value="3">‚≠ê‚≠ê‚≠ê Categor√≠a 3 - Alto Rendimiento</option>
                        </select>
                    </div>
                    <div style="min-width: 160px;">
                        <select id="filterPropiedad" onchange="filterEquipos()" style="width: 100%; padding: 12px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 14px;">
                            <option value="">üè¢ Todas las Propiedades</option>
                            <option value="Empresa">üè¢ Empresa</option>
                            <option value="Propio">üë§ Propio</option>
                        </select>
                    </div>
                </div>
                
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Modelo</th>
                                <th>Tipo</th>
                                <th>Categor√≠a</th>
                                <th>Propiedad</th>
                                <th>N¬∞ Serie</th>
                                <th>Nombre equipo</th>
                                <th>Estado</th>
                                <th>Condici√≥n</th>
                                <th>Asignado a</th>
                                <th>Comentarios</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="equiposTableBody">
                            <tr>
                                <td colspan="11" class="empty-state">
                                    <div class="empty-state-icon">üíª</div>
                                    <h3>No hay equipos registrados</h3>
                                    <p>Haz clic en "Nuevo Equipo" para comenzar</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
            
            <!-- CELULARES -->
            <section id="celulares" class="section">
                <div class="section-header">
                    <h2>Celulares</h2>
                    <button class="btn btn-primary" onclick="openModal('modalCelular')">
                        ‚ûï Nuevo Celular
                    </button>
                </div>
                
                <div style="display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap;">
                    <div class="search-box" style="flex: 1; min-width: 250px; margin-bottom: 0;">
                        <input type="text" id="searchCelular" placeholder="üîç Buscar celular..." onkeyup="filterCelulares()">
                    </div>
                    <div style="min-width: 180px;">
                        <select id="filterEstadoCelular" onchange="filterCelulares()" style="width: 100%; padding: 12px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 14px;">
                            <option value="">üîç Todos los Estados</option>
                            <option value="Disponible">Disponible</option>
                            <option value="Asignado">Asignado</option>
                            <option value="En Reparaci√≥n">En Reparaci√≥n</option>
                            <option value="Dado de Baja">Dado de Baja</option>
                        </select>
                    </div>
                    <div style="min-width: 180px;">
                        <select id="filterCompania" onchange="filterCelulares()" style="width: 100%; padding: 12px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 14px;">
                            <option value="">üì° Todas las Compa√±√≠as</option>
                            <option value="Telcel">Telcel</option>
                            <option value="AT&T">AT&T</option>
                            <option value="Movistar">Movistar</option>
                            <option value="Otro">Otro</option>
                        </select>
                    </div>
                    <div style="min-width: 160px;">
                        <select id="filterPropiedadCelular" onchange="filterCelulares()" style="width: 100%; padding: 12px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 14px;">
                            <option value="">üè¢ Todas las Propiedades</option>
                            <option value="Empresa">üè¢ Empresa</option>
                            <option value="Propio">üë§ Propio</option>
                        </select>
                    </div>
                </div>
                
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Foto</th>
                                <th>Marca</th>
                                <th>Modelo</th>
                                <th>N√∫mero</th>
                                <th>Compa√±√≠a</th>
                                <th>IMEI</th>
                                <th>Propiedad</th>
                                <th>Estado</th>
                                <th>Asignado a</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="celularesTableBody">
                            <tr>
                                <td colspan="10" class="empty-state">
                                    <div class="empty-state-icon">üì±</div>
                                    <h3>No hay celulares registrados</h3>
                                    <p>Haz clic en "Nuevo Celular" para comenzar</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
            
            <!-- ASIGNACIONES -->
            <section id="asignaciones" class="section">
                <div class="section-header">
                    <h2>Asignaciones de Equipos</h2>
                    <button class="btn btn-primary" onclick="abrirNuevaAsignacion()">
                        ‚ûï Nueva Asignaci√≥n
                    </button>
                </div>
                
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Colaborador</th>
                                <th>Equipo</th>
                                <th>Fecha Asignaci√≥n</th>
                                <th>Fecha Devoluci√≥n</th>
                                <th>Estado</th>
                                <th>Observaciones</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="asignacionesTableBody">
                            <tr>
                                <td colspan="7" class="empty-state">
                                    <div class="empty-state-icon">üîó</div>
                                    <h3>No hay asignaciones registradas</h3>
                                    <p>Haz clic en "Nueva Asignaci√≥n" para comenzar</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- LICENCIAS -->
            <section id="licencias" class="section">
                <div class="section-header">
                    <h2>Licencias de Software</h2>
                    <button class="btn btn-primary" onclick="openModal('modalLicencia')">
                        ‚ûï Nueva Licencia
                    </button>
                </div>
                
                <div class="search-box">
                    <input type="text" id="searchLicencia" placeholder="üîç Buscar licencia..." onkeyup="filterLicencias()">
                </div>
                
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Software</th>
                                <th>Tipo Licencia</th>
                                <th>Clave/Serial</th>
                                <th>Cantidad Asignada</th>
                                <th>Fecha Vencimiento</th>
                                <th>Estado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="licenciasTableBody">
                            <tr>
                                <td colspan="7" class="empty-state">
                                    <div class="empty-state-icon">üîë</div>
                                    <h3>No hay licencias registradas</h3>
                                    <p>Haz clic en "Nueva Licencia" para comenzar</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- REPORTES -->
            <section id="reportes" class="section">
                <div class="section-header">
                    <h2>üìà Reportes y An√°lisis</h2>
                </div>

                <div class="stats-grid" style="margin-bottom: 30px;">
                    <div class="stat-card">
                        <h3>Valor Total Inventario</h3>
                        <div class="stat-value" id="valorTotalInventario">$0</div>
                    </div>
                    <div class="stat-card equipos">
                        <h3>Equipos en Garant√≠a</h3>
                        <div class="stat-value" id="equiposEnGarantia">0</div>
                    </div>
                    <div class="stat-card asignados">
                        <h3>Mttos Pendientes</h3>
                        <div class="stat-value" id="mantenimientosPendientes">0</div>
                    </div>
                    <div class="stat-card disponibles">
                        <h3>Licencias Activas</h3>
                        <div class="stat-value" id="licenciasActivasTotal">0</div>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 30px;">
                    <div style="background: white; border: 2px solid #e2e8f0; border-radius: 12px; padding: 25px;">
                        <h3 style="margin: 0 0 20px 0; color: #1e293b; display: flex; align-items: center; gap: 10px;">
                            <span style="font-size: 1.8em;">üìä</span>
                            Reportes Generales
                        </h3>
                        <button class="btn btn-primary" onclick="generarReporteGeneral()" style="width: 100%; margin-bottom: 10px;">
                            üìÑ Reporte General Completo
                        </button>
                        <button class="btn btn-success" onclick="generarReporteEquipos()" style="width: 100%; margin-bottom: 10px;">
                            üíª Inventario de Equipos
                        </button>
                        <button class="btn btn-info" onclick="generarReporteColaboradores()" style="width: 100%; margin-bottom: 10px;">
                            üë• Directorio de Colaboradores
                        </button>
                        <button class="btn btn-warning" onclick="generarReporteLicencias()" style="width: 100%;">
                            üîë Licencias y Asignaciones
                        </button>
                    </div>

                    <div style="background: white; border: 2px solid #e2e8f0; border-radius: 12px; padding: 25px;">
                        <h3 style="margin: 0 0 20px 0; color: #1e293b; display: flex; align-items: center; gap: 10px;">
                            <span style="font-size: 1.8em;">üîß</span>
                            Reportes de Mantenimiento
                        </h3>
                        <button class="btn btn-primary" onclick="generarReporteMantenimiento()" style="width: 100%; margin-bottom: 10px;">
                            üìÖ Calendario de Mantenimientos
                        </button>
                        <button class="btn btn-danger" onclick="generarReporteMantenimientoVencido()" style="width: 100%; margin-bottom: 10px;">
                            ‚ö†Ô∏è Mantenimientos Vencidos
                        </button>
                        <button class="btn btn-warning" onclick="generarReporteGarantias()" style="width: 100%;">
                            üõ°Ô∏è Estado de Garant√≠as
                        </button>
                    </div>

                    <div style="background: white; border: 2px solid #e2e8f0; border-radius: 12px; padding: 25px;">
                        <h3 style="margin: 0 0 20px 0; color: #1e293b; display: flex; align-items: center; gap: 10px;">
                            <span style="font-size: 1.8em;">üí∞</span>
                            Reportes Financieros
                        </h3>
                        <button class="btn btn-success" onclick="generarReporteCompras()" style="width: 100%; margin-bottom: 10px;">
                            üí≥ Historial de Compras
                        </button>
                        <button class="btn btn-info" onclick="generarReporteValorActivos()" style="width: 100%; margin-bottom: 10px;">
                            üíé Valor de Activos
                        </button>
                        <button class="btn btn-primary" onclick="generarReportePorCategoria()" style="width: 100%;">
                            üìä Distribuci√≥n por Categor√≠a
                        </button>
                    </div>
                </div>

                <div style="background: #f8fafc; border-radius: 12px; padding: 25px; border: 2px solid #e2e8f0;">
                    <h3 style="margin: 0 0 15px 0; color: #1e293b;">‚ÑπÔ∏è Informaci√≥n sobre Reportes</h3>
                    <ul style="color: #475569; line-height: 1.8;">
                        <li>Todos los reportes se descargan en formato <strong>Excel (.xlsx)</strong></li>
                        <li>Los reportes incluyen filtros y formato para facilitar el an√°lisis</li>
                        <li>El reporte general incluye todas las pesta√±as en un solo archivo</li>
                        <li>Los datos se exportan con la informaci√≥n m√°s reciente del sistema</li>
                        <li>Los mantenimientos se calculan autom√°ticamente seg√∫n la fecha del √∫ltimo mantenimiento y frecuencia configurada</li>
                    </ul>
                </div>
            </section>
        </div>
    </div>
    
    <!-- MODAL COLABORADOR -->
    <div id="modalColaborador" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalColaboradorTitle">Nuevo Colaborador</h3>
                <button class="close-modal" onclick="closeModal('modalColaborador')">&times;</button>
            </div>
            <form id="formColaborador" onsubmit="saveColaborador(event)">
                <input type="hidden" id="colaboradorId">
                
                <div class="form-group">
                    <label>Foto del Colaborador</label>
                    <input type="file" id="colaboradorFotoInput" accept="image/*" onchange="previewImage(event, 'colaboradorFotoPreview')">
                    <div style="display: flex; gap: 10px; margin-top: 10px;">
                        <button type="button" class="btn btn-secondary btn-sm" onclick="document.getElementById('colaboradorFotoInput').click()">üì∑ Seleccionar Foto</button>
                        <button type="button" class="btn btn-danger btn-sm" onclick="borrarFoto('colaborador')">üóëÔ∏è Borrar Foto</button>
                    </div>
                    <div id="colaboradorFotoPreview" style="margin-top: 10px;"></div>
                    <input type="hidden" id="colaboradorFoto">
                </div>

                <div class="form-grid">
                    <div class="form-group">
                        <label>Nombre Completo *</label>
                        <input type="text" id="colaboradorNombre" required>
                    </div>
                    <div class="form-group">
                        <label>Email *</label>
                        <input type="email" id="colaboradorEmail" required>
                    </div>
                    <div class="form-group">
                        <label>Tel√©fono</label>
                        <input type="tel" id="colaboradorTelefono">
                    </div>
                    <div class="form-group">
                        <label>Departamento *</label>
                        <select id="colaboradorDepartamento" required>
                            <option value="">Seleccionar...</option>
                            <option value="CEO">CEO</option>
                            <option value="SAC">SAC</option>
                            <option value="Hospitality">Consultoria (Hospitality)</option>
                            <option value="Ventas">Ventas</option>
                            <option value="Facturacion y Cobranza">Facturaci√≥n y Cobranza</option>
                            <option value="Desarrollo">Desarrollo</option>
                            <option value="Operaciones">Operaciones</option>
                            <option value="Administraci√≥n">Administraci√≥n</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Puesto *</label>
                        <input type="text" id="colaboradorPuesto" required>
                    </div>
                    <div class="form-group">
                        <label>Fecha de Ingreso</label>
                        <input type="date" id="colaboradorFechaIngreso">
                    </div>
                    <div class="form-group">
                        <label>Jefe Inmediato</label>
                        <select id="colaboradorJefeInmediato" required>
                            <option value="">Seleccionar...</option>
                            <option value="No Aplica">No Aplica</option>
                            <option value="Mauricio Cortazar Mendez">Mauricio Cortazar Mendez</option>
                            <option value="Miriam Reyes Zenteno">Miriam Reyes Zenteno</option>
                            <option value="Mayra Nallely Tovar Garcia">Mayra Nallely Tovar Garcia</option>
                            <option value="Paulina Nieto Tovar">Paulina Nieto Tovar</option>
                            <option value="Gerardo Cortazar Mendez">Gerardo Cortazar Mendez</option>
                            <option value="Xochitl Raquel Rodriguez Cortes">Xochitl Raquel Rodriguez Cortes</option>
                            <option value="Kevin Martin Lechuga Lopez">Kevin Martin Lechuga Lopez</option>
                            <option value="Pablo Angel Valerio Alvarez">Pablo Angel Valerio Alvarez</option>
                            <option value="Emmanuel Riveros Flores">Emmanuel Riveros Flores</option>
                            <option value="Reynaldo Granados Qui√±onez">Reynaldo Granados Qui√±onez</option>
                            <option value="Ismael D√≠az Najera">Ismael D√≠az Najera</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                            <input type="checkbox" id="colaboradorEsExterno" style="width: 20px; height: 20px; cursor: pointer;">
                            <span>¬øEs colaborador externo?</span>
                        </label>
                        <small style="color: #64748b; font-size: 0.85em; margin-top: 5px; display: block;">
                            Marca esta casilla si el colaborador es externo a la empresa
                        </small>
                    </div>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-success">üíæ Guardar</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('modalColaborador')">Cancelar</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- MODAL EQUIPO -->
    <div id="modalEquipo" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalEquipoTitle">Nuevo Equipo</h3>
                <button class="close-modal" onclick="closeModal('modalEquipo')">&times;</button>
            </div>
            <form id="formEquipo" onsubmit="saveEquipo(event)">
                <input type="hidden" id="equipoId">
                
                <div class="form-group" style="grid-column: 1 / -1;">
                    <label>Fotos del Estado Actual del Equipo (Frente, Teclado, Pantalla, etc.)</label>
                    <input type="file" id="equipoFotosInput" accept="image/*" multiple onchange="previewMultipleImages(event)">
                    <div style="display: flex; gap: 10px; margin-top: 10px;">
                        <button type="button" class="btn btn-secondary btn-sm" onclick="document.getElementById('equipoFotosInput').click()">üì∑ Seleccionar Fotos</button>
                        <button type="button" class="btn btn-danger btn-sm" onclick="borrarTodasFotos()">üóëÔ∏è Borrar Todas las Fotos</button>
                    </div>
                    <p style="margin-top: 8px; font-size: 0.85em; color: #64748b;">üí° Puedes seleccionar m√∫ltiples fotos: frente del equipo, teclado, pantalla, laterales, etc.</p>
                    <div id="equipoFotosPreview" style="margin-top: 15px; display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 15px;"></div>
                    <input type="hidden" id="equipoFotos">
                </div>

                <div class="form-grid">
                    <div class="form-group">
                        <label>Tipo de Equipo *</label>
                        <select id="equipoTipo" required>
                            <option value="">Seleccionar...</option>
                            <option value="Laptop">Laptop</option>
                            <option value="Monitor">Monitor</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Marca *</label>
                        <input type="text" id="equipoMarca" required>
                    </div>
                    <div class="form-group">
                        <label>Modelo *</label>
                        <input type="text" id="equipoModelo" required>
                    </div>
                    <div class="form-group">
                        <label>N√∫mero de Serie *</label>
                        <input type="text" id="equipoNumSerie" required>
                    </div>
                    <div class="form-group">
                        <label>Nombre del Equipo</label>
                        <input type="text" id="equipoNombre" placeholder="Ej: Laptop-Juan-01">
                    </div>
                     <div class="form-group">
                        <label>ID Interno equipo</label>
                        <input type="text" id="IdequipoInterno" placeholder="Ej: NT001XX">
                    </div>
                    <div class="form-group">
                        <label>Categor√≠a *</label>
                        <select id="equipoCategoria" required onchange="updateCategoriaHelp()">
                            <option value="">Seleccionar...</option>
                            <option value="1">‚≠ê Categor√≠a 1 - B√°sico</option>
                            <option value="2">‚≠ê‚≠ê Categor√≠a 2 - Intermedio</option>
                            <option value="3">‚≠ê‚≠ê‚≠ê Categor√≠a 3 - Alto Rendimiento</option>
                        </select>
                        <small id="categoriaHelp" style="color: #64748b; font-size: 0.85em; margin-top: 5px; display: block;"></small>
                        <button type="button" class="btn btn-info btn-sm" onclick="sugerirCategoria()" style="margin-top: 8px; width: 100%;">
                            üí° Sugerir Categor√≠a seg√∫n Specs
                        </button>
                    </div>
                    <div class="form-group">
                        <label>Propiedad *</label>
                        <select id="equipoPropiedad" required>
                            <option value="">Seleccionar...</option>
                            <option value="Empresa">üè¢ Empresa</option>
                            <option value="Propio">üë§ Propio del Colaborador</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Procesador</label>
                        <input type="text" id="equipoProcesador" placeholder="Ej: Intel i7">
                    </div>
                    <div class="form-group">
                        <label>RAM (GB)</label>
                        <input type="number" id="equipoRam" placeholder="8">
                    </div>
                    <div class="form-group">
                        <label>Almacenamiento</label>
                        <input type="text" id="equipoAlmacenamiento" placeholder="Ej: 512GB SSD">
                    </div>
                    <div class="form-group">
                        <label>Sistema Operativo</label>
                        <input type="text" id="equipoSO" placeholder="Ej: Windows 11">
                    </div>
                    <div class="form-group">
                        <label>Fecha de Compra</label>
                        <input type="date" id="equipoFechaCompra">
                    </div>
                    <div class="form-group">
                        <label>Proveedor</label>
                        <input type="text" id="equipoProveedor" placeholder="Ej: Dell M√©xico">
                    </div>
                    <div class="form-group">
                        <label>Precio de Compra (MXN)</label>
                        <input type="number" id="equipoPrecio" placeholder="15000" step="0.01">
                    </div>
                    <div class="form-group">
                        <label>N√∫mero de Factura Proveedor</label>
                        <input type="text" id="equipoFactura" placeholder="Ej: FAC-2024-001">
                    </div>
                    <div class="form-group">
                        <label>Garant√≠a (meses)</label>
                        <input type="number" id="equipoGarantia" placeholder="12">
                    </div>
                    <div class="form-group">
                        <label>√öltimo Mantenimiento</label>
                        <input type="date" id="equipoUltimoMantenimiento">
                    </div>
                    <div class="form-group">
                        <label>Frecuencia Mantenimiento (meses)</label>
                        <select id="equipoFrecuenciaMantenimiento">
                            <option value="">Seleccionar...</option>
                            <option value="3">Cada 3 meses</option>
                            <option value="6">Cada 6 meses</option>
                            <option value="12">Cada 12 meses</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Condiciones del Equipo</label>
                        <select id="equipoCondicion">
                            <option value="">Seleccionar...</option>
                            <option value="Buenas condiciones">‚úÖ Buenas condiciones</option>
                            <option value="Aceptable">üü° Aceptable</option>
                            <option value="Malas condiciones">üî¥ Malas condiciones</option>
                            <option value="Baja definitiva">‚õî Baja definitiva</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>üìç Ubicaci√≥n del Equipo</label>
                        <input type="text" id="equipoUbicacion" placeholder="Ej: Oficina principal, Almac√©n B, Sala de juntas...">
                        <small style="color: #64748b; font-size: 0.82em; margin-top: 4px; display: block;">
                            Si el equipo est√° asignado, la ubicaci√≥n se mostrar√° autom√°ticamente como el colaborador que lo tiene.
                        </small>
                    </div>
                    <div class="form-group">
                        <label>Estado *</label>
                        <select id="equipoEstado" required>
                            <option value="Disponible">Disponible</option>
                            <option value="Asignado">Asignado</option>
                            <option value="En Reparaci√≥n">En Reparaci√≥n</option>
                            <option value="Dado de Baja">Dado de Baja</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Observaciones</label>
                    <textarea id="equipoObservaciones"></textarea>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-success">üíæ Guardar</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('modalEquipo')">Cancelar</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- MODAL CELULAR -->
    <div id="modalCelular" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalCelularTitle">Nuevo Celular</h3>
                <button class="close-modal" onclick="closeModal('modalCelular')">&times;</button>
            </div>
            <form id="formCelular" onsubmit="saveCelular(event)">
                <input type="hidden" id="celularId">
                
                <div class="form-group" style="grid-column: 1 / -1;">
                    <label>Fotos del Estado Actual del Celular (Frente, Trasera, Pantalla, etc.)</label>
                    <input type="file" id="celularFotosInput" accept="image/*" multiple onchange="previewMultipleCelularImages(event)">
                    <div style="display: flex; gap: 10px; margin-top: 10px;">
                        <button type="button" class="btn btn-secondary btn-sm" onclick="document.getElementById('celularFotosInput').click()">üì∑ Seleccionar Fotos</button>
                        <button type="button" class="btn btn-danger btn-sm" onclick="borrarTodasFotosCelular()">üóëÔ∏è Borrar Todas las Fotos</button>
                    </div>
                    <p style="margin-top: 8px; font-size: 0.85em; color: #64748b;">üí° Puedes seleccionar m√∫ltiples fotos: frente, trasera, pantalla, laterales, caja, etc.</p>
                    <div id="celularFotosPreview" style="margin-top: 15px; display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 15px;"></div>
                    <input type="hidden" id="celularFotos">
                </div>

                <div class="form-grid">
                    <div class="form-group">
                        <label>Marca *</label>
                        <input type="text" id="celularMarca" required placeholder="Ej: iPhone, Samsung, Xiaomi">
                    </div>
                    <div class="form-group">
                        <label>Modelo *</label>
                        <input type="text" id="celularModelo" required placeholder="Ej: iPhone 13 Pro, Galaxy S23">
                    </div>
                    <div class="form-group">
                        <label>N√∫mero Telef√≥nico *</label>
                        <input type="text" id="celularNumero" required placeholder="Ej: 555-123-4567">
                    </div>
                    <div class="form-group">
                        <label>Compa√±√≠a *</label>
                        <select id="celularCompania" required>
                            <option value="">Seleccionar...</option>
                            <option value="Telcel">Telcel</option>
                            <option value="AT&T">AT&T</option>
                            <option value="Movistar">Movistar</option>
                            <option value="Otro">Otro</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>IMEI *</label>
                        <input type="text" id="celularIMEI" required placeholder="15 d√≠gitos">
                    </div>
                    <div class="form-group">
                        <label>N√∫mero de Serie</label>
                        <input type="text" id="celularNumSerie" placeholder="N√∫mero de serie del fabricante">
                    </div>
                    <div class="form-group">
                        <label>Propiedad *</label>
                        <select id="celularPropiedad" required>
                            <option value="">Seleccionar...</option>
                            <option value="Empresa">üè¢ Empresa</option>
                            <option value="Propio">üë§ Propio del Colaborador</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Capacidad de Almacenamiento</label>
                        <select id="celularAlmacenamiento">
                            <option value="">Seleccionar...</option>
                            <option value="64GB">64GB</option>
                            <option value="128GB">128GB</option>
                            <option value="256GB">256GB</option>
                            <option value="512GB">512GB</option>
                            <option value="1TB">1TB</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Color</label>
                        <input type="text" id="celularColor" placeholder="Ej: Negro, Blanco, Azul">
                    </div>
                    <div class="form-group">
                        <label>Sistema Operativo</label>
                        <select id="celularSO">
                            <option value="">Seleccionar...</option>
                            <option value="iOS">iOS</option>
                            <option value="Android">Android</option>
                            <option value="Otro">Otro</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Fecha de Compra</label>
                        <input type="date" id="celularFechaCompra">
                    </div>
                    <div class="form-group">
                        <label>Proveedor</label>
                        <input type="text" id="celularProveedor" placeholder="Ej: Apple Store, Liverpool">
                    </div>
                    <div class="form-group">
                        <label>Precio de Compra (MXN)</label>
                        <input type="number" id="celularPrecio" placeholder="15000" step="0.01">
                    </div>
                    <div class="form-group">
                        <label>N√∫mero de Factura</label>
                        <input type="text" id="celularFactura" placeholder="Ej: FAC-2024-001">
                    </div>
                    <div class="form-group">
                        <label>Garant√≠a (meses)</label>
                        <input type="number" id="celularGarantia" placeholder="12">
                    </div>
                    <div class="form-group">
                        <label>Plan Contratado</label>
                        <input type="text" id="celularPlan" placeholder="Ej: Plan Max Sin L√≠mite 3000">
                    </div>
                    <div class="form-group">
                        <label>Costo Mensual del Plan (MXN)</label>
                        <input type="number" id="celularCostoPlan" placeholder="500" step="0.01">
                    </div>
                    <div class="form-group">
                        <label>Fecha de Renovaci√≥n del Plan</label>
                        <input type="date" id="celularRenovacionPlan">
                    </div>
                    <div class="form-group">
                        <label>Estado *</label>
                        <select id="celularEstado" required>
                            <option value="Disponible">Disponible</option>
                            <option value="Asignado">Asignado</option>
                            <option value="En Reparaci√≥n">En Reparaci√≥n</option>
                            <option value="Dado de Baja">Dado de Baja</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Observaciones</label>
                    <textarea id="celularObservaciones" placeholder="Accesorios incluidos, condici√≥n, etc."></textarea>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-success">üíæ Guardar</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('modalCelular')">Cancelar</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- MODAL ASIGNACI√ìN CELULAR -->
    <div id="modalAsignacionCelular" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üì± Asignar Celular</h3>
                <button class="close-modal" onclick="closeModal('modalAsignacionCelular')">&times;</button>
            </div>
            <div style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); color: white; padding: 12px 16px; border-radius: 8px; margin-bottom: 20px;">
                <p style="margin: 0; font-size: 0.85em; opacity: 0.9;">Celular</p>
                <p style="margin: 4px 0 0 0; font-weight: 700; font-size: 1.05em;" id="asignacionCelularNombre"></p>
            </div>
            <form id="formAsignacionCelular" onsubmit="saveAsignacionCelular(event)">
                <input type="hidden" id="asignacionCelularId">
                <div class="form-grid">
                    <div class="form-group">
                        <label>Colaborador *</label>
                        <select id="asignacionCelularColaborador" required>
                            <option value="">Seleccionar colaborador...</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Fecha de Asignaci√≥n *</label>
                        <input type="date" id="asignacionCelularFecha" required>
                    </div>
                </div>
                <div class="form-group">
                    <label>Observaciones</label>
                    <textarea id="asignacionCelularObservaciones" placeholder="Accesorios entregados, condici√≥n, etc."></textarea>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-success">üíæ Asignar Celular</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('modalAsignacionCelular')">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- MODAL ASIGNACI√ìN -->
    <div id="modalAsignacion" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Nueva Asignaci√≥n</h3>
                <button class="close-modal" onclick="closeModal('modalAsignacion')">&times;</button>
            </div>
            <form id="formAsignacion" onsubmit="saveAsignacion(event)">
                <div class="form-grid">
                    <div class="form-group">
                        <label>Colaborador *</label>
                        <select id="asignacionColaborador" required>
                            <option value="">Seleccionar colaborador...</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Equipo *</label>
                        <select id="asignacionEquipo" required>
                            <option value="">Seleccionar equipo...</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Fecha de Asignaci√≥n *</label>
                        <input type="date" id="asignacionFecha" required>
                    </div>
                    <div class="form-group">
                        <label>Estado *</label>
                        <select id="asignacionEstado" required>
                            <option value="Activa">Activa</option>
                            <option value="Devuelto">Devuelto</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Observaciones</label>
                    <textarea id="asignacionObservaciones" placeholder="Condiciones, accesorios incluidos, etc."></textarea>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-success">üíæ Asignar Equipo</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('modalAsignacion')">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- MODAL LICENCIA -->
    <div id="modalLicencia" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalLicenciaTitle">Nueva Licencia</h3>
                <button class="close-modal" onclick="closeModal('modalLicencia')">&times;</button>
            </div>
            <form id="formLicencia" onsubmit="saveLicencia(event)">
                <input type="hidden" id="licenciaId">
                <div class="form-grid">
                    <div class="form-group">
                        <label>Software *</label>
                        <input type="text" id="licenciaSoftware" required placeholder="Ej: Microsoft Office 365">
                    </div>
                    <div class="form-group">
                        <label>Tipo de Licencia *</label>
                        <select id="licenciaTipo" required>
                            <option value="">Seleccionar...</option>
                            <option value="Perpetua">Perpetua</option>
                            <option value="Suscripci√≥n Anual">Suscripci√≥n Anual</option>
                            <option value="Suscripci√≥n Mensual">Suscripci√≥n Mensual</option>
                            <option value="Prueba">Prueba</option>
                            <option value="Gratuita">Gratuita</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Clave/Serial</label>
                        <input type="text" id="licenciaClave" placeholder="XXXXX-XXXXX-XXXXX">
                    </div>
                    <div class="form-group">
                        <label>Fecha de Compra</label>
                        <input type="date" id="licenciaFechaCompra">
                    </div>
                    <div class="form-group">
                        <label>Fecha de Vencimiento</label>
                        <input type="date" id="licenciaFechaVencimiento">
                    </div>
                    <div class="form-group">
                        <label>Estado *</label>
                        <select id="licenciaEstado" required>
                            <option value="Activa">Activa</option>
                            <option value="Vencida">Vencida</option>
                            <option value="Disponible">Disponible</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Notas</label>
                    <textarea id="licenciaNotas" placeholder="Informaci√≥n adicional..."></textarea>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-success">üíæ Guardar</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('modalLicencia')">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- MODAL ASIGNAR USUARIOS A LICENCIA -->
    <div id="modalAsignarUsuarios" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Asignar Usuarios a <span id="licenciaAsignarNombre"></span></h3>
                <button class="close-modal" onclick="closeModal('modalAsignarUsuarios')">&times;</button>
            </div>
            <div>
                <input type="hidden" id="licenciaAsignarId">
                
                <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                    <button type="button" class="btn btn-sm btn-success" onclick="seleccionarTodosUsuarios()">‚úì Seleccionar Todos</button>
                    <button type="button" class="btn btn-sm btn-secondary" onclick="deseleccionarTodosUsuarios()">‚úó Deseleccionar Todos</button>
                </div>
                
                <div class="search-box">
                    <input type="text" id="searchUsuarioAsignar" placeholder="üîç Buscar colaborador..." onkeyup="filterUsuariosAsignar()">
                </div>
                <div id="listaUsuariosAsignar" style="max-height: 400px; overflow-y: auto;">
                    <!-- Se llenar√° din√°micamente -->
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-success" onclick="guardarAsignacionesLicencia()">üíæ Guardar Asignaciones</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('modalAsignarUsuarios')">Cancelar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL DETALLE LICENCIA -->
    <div id="modalDetalleLicencia" class="modal">
        <div class="modal-content modal-detail">
            <div class="modal-header">
                <h3>Detalle de Licencia</h3>
                <button class="close-modal" onclick="closeModal('modalDetalleLicencia')">&times;</button>
            </div>
            <div id="detalleLicenciaContent">
                <!-- Se llenar√° din√°micamente -->
            </div>
        </div>
    </div>

    <!-- MODAL DETALLE COLABORADOR -->
    <div id="modalDetalleColaborador" class="modal">
        <div class="modal-content modal-detail">
            <div class="modal-header">
                <h3>Detalle del Colaborador</h3>
                <button class="close-modal" onclick="closeModal('modalDetalleColaborador')">&times;</button>
            </div>
            <div id="detalleColaboradorContent">
                <!-- Se llenar√° din√°micamente -->
            </div>
        </div>
    </div>

    <!-- MODAL DETALLE EQUIPO -->
    <div id="modalDetalleEquipo" class="modal">
        <div class="modal-content modal-detail">
            <div class="modal-header">
                <h3>Detalle del Equipo</h3>
                <button class="close-modal" onclick="closeModal('modalDetalleEquipo')">&times;</button>
            </div>
            <div id="detalleEquipoContent">
                <!-- Se llenar√° din√°micamente -->
            </div>
        </div>
    </div>

    <!-- MODAL AGENDAR MANTENIMIENTO -->
    <div id="modalAgendarMantenimiento" class="modal">
        <div class="modal-content" style="max-width: 520px;">
            <div class="modal-header">
                <h3>üîß Agendar Mantenimiento</h3>
                <button class="close-modal" onclick="closeModal('modalAgendarMantenimiento')">&times;</button>
            </div>
            <div style="background: linear-gradient(135deg,#667eea,#764ba2); color:white; padding:12px 16px; border-radius:8px; margin-bottom:15px;">
                <p style="margin:0; font-size:0.82em; opacity:0.85;">Equipo</p>
                <p style="margin:4px 0 0 0; font-weight:700; font-size:1.05em;" id="citaEquipoNombre"></p>
            </div>
            <div id="citaEstatusEquipo"></div>
            <form id="formCitaMantenimiento" onsubmit="guardarCitaMantenimiento(event)">
                <input type="hidden" id="citaEquipoId">
                <div class="form-grid" style="grid-template-columns: 1fr 1fr;">
                    <div class="form-group">
                        <label>üìÖ Fecha de la Cita *</label>
                        <input type="date" id="citaFecha" required>
                    </div>
                    <div class="form-group">
                        <label>üïê Hora</label>
                        <input type="time" id="citaHora">
                    </div>
                </div>
                <div class="form-group" style="margin-bottom:15px;">
                    <label>üî© Tipo de Mantenimiento *</label>
                    <select id="citaTipo" required>
                        <option value="Preventivo">üõ°Ô∏è Preventivo</option>
                        <option value="Correctivo">üî® Correctivo</option>
                        <option value="Limpieza">üßπ Limpieza</option>
                        <option value="Actualizaci√≥n">‚¨ÜÔ∏è Actualizaci√≥n de Software</option>
                        <option value="Diagn√≥stico">üîç Diagn√≥stico</option>
                    </select>
                </div>
                <div class="form-group" style="margin-bottom:15px;">
                    <label>üë®‚Äçüîß T√©cnico Responsable</label>
                    <input type="text" id="citaTecnico" placeholder="Nombre del t√©cnico o empresa...">
                </div>
                <div class="form-group" style="margin-bottom:20px;">
                    <label>üìù Notas adicionales</label>
                    <textarea id="citaNotas" rows="3" placeholder="Descripci√≥n del servicio, piezas a reemplazar, etc..."></textarea>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">üìÖ Confirmar Cita</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('modalAgendarMantenimiento')">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- MODAL COMPLETAR MANTENIMIENTO -->
    <div id="modalCompletarMantenimiento" class="modal">
        <div class="modal-content" style="max-width: 540px;">
            <div class="modal-header" style="background: linear-gradient(135deg, #10b981, #059669); color: white; border-radius: 8px 8px 0 0;">
                <h3 style="color: white; display: flex; align-items: center; gap: 10px;">
                    ‚úÖ Completar Mantenimiento
                </h3>
                <button class="close-modal" style="color: white;" onclick="closeModal('modalCompletarMantenimiento')">&times;</button>
            </div>

            <!-- Info equipo -->
            <div style="background: #f0fdf4; border: 1px solid #bbf7d0; border-radius: 8px; padding: 12px 16px; margin-bottom: 20px;">
                <p style="margin:0; font-size:0.82em; color:#064e3b; font-weight:600;">Equipo</p>
                <p style="margin:4px 0 0 0; font-weight:700; color:#065f46; font-size:1.05em;" id="completarEquipoNombre"></p>
                <p style="margin:4px 0 0 0; color:#047857; font-size:0.85em;" id="completarCitaInfo"></p>
            </div>

            <form id="formCompletarMantenimiento" onsubmit="confirmarMantenimientoCompletado(event)">
                <input type="hidden" id="completarCitaId">
                <input type="hidden" id="completarEquipoId">

                <!-- Fecha real de realizaci√≥n -->
                <div class="form-group" style="margin-bottom: 16px;">
                    <label>üìÖ Fecha en que se realiz√≥ *</label>
                    <input type="date" id="completarFechaReal" required>
                </div>

                <!-- Nuevo estado del equipo -->
                <div class="form-group" style="margin-bottom: 16px;">
                    <label>üñ•Ô∏è Estado del Equipo despu√©s del mantenimiento *</label>
                    <select id="completarEstadoEquipo" required>
                        <option value="Disponible">‚úÖ Disponible</option>
                        <option value="Asignado">üîµ Asignado</option>
                        <option value="En Reparaci√≥n">üîß En Reparaci√≥n</option>
                        <option value="Dado de Baja">‚õî Dado de Baja</option>
                    </select>
                </div>

                <!-- Nueva condici√≥n del equipo -->
                <div class="form-group" style="margin-bottom: 16px;">
                    <label>üîç Condici√≥n del Equipo despu√©s del mantenimiento *</label>
                    <select id="completarCondicionEquipo" required>
                        <option value="">Seleccionar condici√≥n...</option>
                        <option value="Buenas condiciones">‚úÖ Buenas condiciones</option>
                        <option value="Aceptable">üü° Aceptable</option>
                        <option value="Malas condiciones">üî¥ Malas condiciones</option>
                        <option value="Baja definitiva">‚õî Baja definitiva</option>
                    </select>
                </div>

                <!-- Observaciones del mantenimiento -->
                <div class="form-group" style="margin-bottom: 20px;">
                    <label>üìù Observaciones del Mantenimiento</label>
                    <textarea id="completarObservaciones" rows="3"
                        placeholder="Trabajos realizados, piezas reemplazadas, recomendaciones..."></textarea>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-success">‚úÖ Confirmar Mantenimiento</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('modalCompletarMantenimiento')">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- MODAL DETALLE CELULAR -->
    <div id="modalDetalleCelular" class="modal">
        <div class="modal-content modal-detail">
            <div class="modal-header">
                <h3>Detalle del Celular</h3>
                <button class="close-modal" onclick="closeModal('modalDetalleCelular')">&times;</button>
            </div>
            <div id="detalleCelularContent">
                <!-- Se llenar√° din√°micamente -->
            </div>
        </div>
    </div>
    
    <!-- NOTIFICACIONES -->
    <div id="notification" class="notification">
        <span id="notificationText"></span>
    </div>
</div><!-- /appContainer -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <!-- Supabase SDK -->
<script src="https://unpkg.com/@supabase/supabase-js@2/dist/umd/supabase.js"></script>
<script src="./js/database.js"></script>
<script src="./js/auth.js"></script>
<script src="./js/images.js"></script>
<script src="./js/colaboradores.js"></script>
<script src="./js/equipos.js"></script>
<script src="./js/celulares.js"></script>
<script src="./js/asignaciones.js"></script>
<script src="./js/licencias.js"></script>
<script src="./js/dashboard.js"></script>
<script src="./js/reportes.js"></script>
<script>initAuth();</script>
</body>
</html>
